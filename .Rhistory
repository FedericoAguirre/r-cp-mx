inner_join(conteo_asentamiento_df, zona_df, by = "zona_id", copy = FALSE, keep = TRUE) %>%
inner_join(geoposicion_df, by = "estado_id", copy = FALSE, keep = TRUE)
barras_gral<-ggplot(data=asentamiento_gral_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue", position="dodge") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_gral
library(ggplot)
library(ggplot2)
ggplot(asentamiento_gral_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
geom_bar(position="dodge")
ggplot(asentamiento_gral_df, aes(x=reorder(estado, -asentamientos), y=asentamientos), fill=zona) +
geom_bar(position="dodge")
View(asentamiento_gral_df)
ggplot(asentamiento_gral_df, aes(x=reorder(estado, -asentamientos), y=asentamientos), fill=zona) +
geom_bar(position="dodge", stat="sum")
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos), fill=zona) +
geom_bar(position="dodge", stat="sum")
cabbage_exp
View(cabbage_exp)
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos)) + geom_bar(stat="sum")
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos)) +
geom_bar(stat="sum", position="dodge")
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos, fill=zona)) +
geom_bar(stat="sum", position="dodge")
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos, fill=zona)) +
geom_bar(stat="sum", position="dodge") +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos, fill=zona)) +
geom_bar(stat="sum", position="identity") +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos, fill=zona)) +
geom_bar(stat="sum", position="dodge") +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
ggplot(asentamiento_gral_df, aes(x=estado, y=asentamientos, fill=zona)) +
geom_bar(stat="sum", position="identity") +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
View(asentamiento_rural_df)
View(asentamiento_rural_df)
View(asentamiento_semiurbano_df)
View(asentamiento_semiurbano_df)
View(asentamiento_urbano_df)
View(asentamiento_urbano_df)
asentamiento_gral_df <-
left_outer_join(conteo_asentamiento_df, zona_df, by = "zona_id", copy = FALSE, keep = TRUE) %>%
left_outer_join(geoposicion_df, by = "estado_id", copy = FALSE, keep = TRUE)
asentamiento_gral_df <-
left_join(conteo_asentamiento_df, zona_df, by = "zona_id", copy = FALSE, keep = TRUE) %>%
left_join(geoposicion_df, by = "estado_id", copy = FALSE, keep = TRUE)
View(asentamiento_gral_df)
asentamiento_gral_df <-
left_join(geoposicion_df, conteo_asentamiento_df, by = "estado_id", copy = FALSE, keep = TRUE) %>%
left_join(zona_df, by = "zona_id", copy = FALSE, keep = TRUE)
View(barras_gral)
View(asentamiento_gral_df)
View(asentamiento_df)
View(asentamiento_df)
library(dplyr)
setwd("/Users/federicoaguirre/Documents/proyectos/r-cp-mx/")
zona_df <- read.csv("./cp-db/zona.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
estado_df <- read.csv("./cp-db/estado.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
asentamiento_df <- read.csv("./cp-db/asentamiento.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geoposicion_df <- read.csv("./cp-db/estado_geoposicion.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
View(geoposicion_df)
geo_zona_df <- full_join(geoposicion_df, zona_df,
by = "estado_id", copy = FALSE, keep = TRUE)
geo_zona_df <- crossing(geoposicion_df, zona_df)
library(tidyr)
install.packages(tidyr)
install.packages("tidyr")
library(tidyr)
geo_zona_df <- crossing(geoposicion_df, zona_df)
View(geo_zona_df)
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE)
View(geo_zona_df)
View(geo_zona_asentamiento_df)
View(geo_zona_asentamiento_df)
View(geo_zona_asentamiento_df)
View(geo_zona_asentamiento_df)
conteo_asentamiento_df <- select(geo_zona_asentamiento_df, estado,
latitud, longitud, zona) %>%
group_by(estado, latitud, longitud, zona) %>%
summarise(asentamientos = n())
View(conteo_asentamiento_df)
View(geo_zona_asentamiento_df)
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = is.na(asentamiento))
View(geo_zona_asentamiento_df)
View(geo_zona_asentamiento_df)
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = not(is.na(asentamiento)))
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = !is.na(asentamiento))
View(geo_zona_asentamiento_df)
View(geo_zona_asentamiento_df)
geo_zona_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = !is.na(asentamiento))
View(geo_zona_asentamiento_df)
geo_zona_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))
conteo_asentamiento_df <- select(geo_zona_asentamiento_df, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
View(conteo_asentamiento_df)
conteo_asentamiento_df <- select(geo_zona_asentamiento_df, estado_id, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
View(conteo_asentamiento_df)
View(conteo_asentamiento_df)
conteo_asentamiento_df <- select(geo_zona_asentamiento_df, estado_id, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
sum(conteo_asentamiento_df$asentamientos)
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))
select(geo_zona_asentamiento_df, estado_id, estado, %>%
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))  %>%
select(geo_zona_asentamiento_df, estado_id, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))  %>%
select(estado_id, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
library(dplyr)
library(tidyr)
setwd("/Users/federicoaguirre/Documents/proyectos/r-cp-mx/")
zona_df <- read.csv("./cp-db/zona.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
estado_df <- read.csv("./cp-db/estado.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
asentamiento_df <- read.csv("./cp-db/asentamiento.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geoposicion_df <- read.csv("./cp-db/estado_geoposicion.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geo_zona_df <- crossing(geoposicion_df, zona_df)
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = !is.na(asentamiento))
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))  %>%
select(estado_id, estado,
latitud, longitud, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
View(conteo_asentamiento_df)
library(dplyr)
library(tidyr)
setwd("/Users/federicoaguirre/Documents/proyectos/r-cp-mx/")
zona_df <- read.csv("./cp-db/zona.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
estado_df <- read.csv("./cp-db/estado.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
asentamiento_df <- read.csv("./cp-db/asentamiento.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geoposicion_df <- read.csv("./cp-db/estado_geoposicion.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geo_zona_df <- crossing(geoposicion_df, zona_df)
geo_zona_asentamiento_df <- left_join(geo_zona_df, asentamiento_df,
by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = !is.na(asentamiento))
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))  %>%
select(estado_id, estado,
latitud, longitud, zona_id, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona_id, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
View(conteo_asentamiento_df)
sum(conteo_asentamiento_df$asentamientos)
asentamiento_urbano_df <- filter(conteo_asentamiento_df, zona_id == 'U') %>%
select(estado, zona, asentamientos)
View(asentamiento_urbano_df)
View(asentamiento_urbano_df)
asentamiento_urbano_df <- filter(conteo_asentamiento_df, zona_id == 'U') %>%
select(estado, zona, asentamientos)
asentamiento_urbano_df <- select(estado, zona, asentamientos) %>%
filter(conteo_asentamiento_df, zona_id == 'U')
asentamiento_urbano_df <- select(conteo_asentamiento_df, estado, zona,
asentamientos) %>%
filter(zona_id == 'U')
library(dplyr)
library(tidyr)
setwd("/Users/federicoaguirre/Documents/proyectos/r-cp-mx/")
zona_df <- read.csv("./cp-db/zona.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
asentamiento_df <- read.csv("./cp-db/asentamiento.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
geoposicion_df <- read.csv("./cp-db/estado_geoposicion.csv" , header = TRUE, sep = ",",
skip = 0, colClasses = "character", na.strings = "NA")
conteo_asentamiento_df <- crossing(geoposicion_df, zona_df) %>%
left_join(asentamiento_df, by = c("estado_id", "zona_id"), copy = FALSE, keep = TRUE) %>%
mutate(tiene_asentamiento = ifelse(is.na(asentamiento), 0, 1 ))  %>%
select(estado_id, estado, latitud, longitud, zona_id, zona, tiene_asentamiento) %>%
group_by(estado_id, estado, latitud, longitud, zona_id, zona) %>%
summarise(asentamientos = sum(tiene_asentamiento))
View(conteo_asentamiento_df)
asentamiento_urbano_df <- select(conteo_asentamiento_df, estado, zona,
asentamientos) %>%
filter(zona_id == 'U')
View(asentamiento_urbano_df)
asentamiento_urbano_df <- filter(conteo_asentamiento_df, zona_id == 'U') %>%
select(estado, zona, asentamientos)
View(asentamiento_urbano_df)
source('~/Documents/proyectos/r-cp-mx/analisis.r', echo=TRUE)
View(asentamiento_rural_df)
View(asentamiento_semiurbano_df)
View(asentamiento_semiurbano_df)
source('~/Documents/proyectos/r-cp-mx/analisis.r', echo=TRUE)
View(asentamiento_rural_df)
View(asentamiento_urbano_df)
View(asentamiento_urbano_df)
View(asentamiento_semiurbano_df)
View(asentamiento_semiurbano_df)
library(ggplot2)
barras_gral<-ggplot(data=conteo_asentamiento_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue", position="dodge") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_gral
barras_gral<-ggplot(data=conteo_asentamiento_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue", position = "stack") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_gral
barras_gral<-ggplot(data=conteo_asentamiento_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue", position = "stack") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_gral
barras_urbanos<-ggplot(data=asentamiento_urbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS URBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_urbanos
barras_semiurbanos<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS SEMIURBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_semiurbanos
barras_rurales<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS RURALES") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_rurales
source('~/Documents/proyectos/r-cp-mx/analisis.r', echo=TRUE)
library(leaflet)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~estado)
map
source('~/Documents/proyectos/r-cp-mx/analisis.r', echo=TRUE)
library(ggplot2)
barras_urbanos<-ggplot(data=asentamiento_urbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS URBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_urbanos
barras_semiurbanos<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS SEMIURBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_semiurbanos
barras_rurales<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS RURALES") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_rurales
barras_gral<-ggplot(data=conteo_asentamiento_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue", position = "stack") +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_gral
barras_semiurbanos<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS SEMIURBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_semiurbanos
barras_rurales<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS RURALES") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_rurales
library(leaflet)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~estado)
map
library(leaflet)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =<b>~estado</b>)
map
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup ="<b>~estado</b>")
map
library(leaflet)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup ="<div><p><b>Estado</b></p><p>1000</p></div>")
map
library(leaflet)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup ="<div><div><b>Estado</b></div><div>1000</div></div>")
map
asentamiento_urbano_df <- filter(conteo_asentamiento_df, zona_id == 'U') %>%
mutate(pop_up = paste('<div><div><b>', estado, '</b></div><div>', asentamientos, '</div></div>'))
View(asentamiento_urbano_df)
map <- leaflet(asentamiento_urbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~pop_up)
map
source('~/Documents/proyectos/r-cp-mx/analisis.r', echo=TRUE)
library(ggplot2)
barras_urbanos<-ggplot(data=asentamiento_urbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS URBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_urbanos
barras_semiurbanos<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS SEMIURBANOS") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_semiurbanos
barras_rurales<-ggplot(data=asentamiento_semiurbano_df, aes(x=reorder(estado, -asentamientos), y=asentamientos)) +
labs(title = "ASENTAMIENTOS RURALES") +
xlab("Estados") +
ylab("Asentamientos") +
geom_bar(stat="sum", fill = "steelblue") +
geom_text(aes(label=asentamientos), angle = 45) +
theme(axis.text.x = element_text(angle = 90, hjust = 1), axis.text.y = element_text(angle = 90, hjust = 1))
barras_rurales
mapa_semiurbano <- leaflet(asentamiento_semiurbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~pop_up)
mapa_semiurbano
mapa_rural <- leaflet(asentamiento_semiurbano_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~pop_up)
mapa_rural
View(conteo_asentamiento_df)
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado = paste("<table><tr><th colspan="2"><b>", estado, "/b></th></tr>"
fila_urbano = paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano = paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural = paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie = "</table>"
return paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
}
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "/b></th></tr>"
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie <- "</table>"
return paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
}
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "/b></th></tr>"
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie <- "</table>"
tabla <- paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
return tabla
}
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "/b></th></tr>"
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie <- "</table>"
tabla <- paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
return(tabla)
}
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "/b></th></tr>")
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie <- "</table>"
tabla <- paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
return(tabla)
}
popup <- genera_popup("CDMX", 1000,10, 10)
popup
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "</b></th></tr>")
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>")
tabla_pie <- "</table>"
tabla <- paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie)
return(tabla)
}
popup <- genera_popup("CDMX", 1000,10, 10)
popup
genera_popup <- function (estado, urbano, semiurbano, rural) {
tabla_encabezado <- paste("<table><tr><th colspan=\"2\"><b>", estado, "</b></th></tr>", sep = "")
fila_urbano <- paste("<tr><td>Urbano</td><td>", urbano, "</td></tr>", sep = "")
fila_semiurbano <- paste("<tr><td>Semiurbano</td><td>", semiurbano, "</td></tr>", sep = "")
fila_rural <- paste("<tr><td>Rural</td><td>", rural, "</td></tr>", sep = "")
tabla_pie <- "</table>"
tabla <- paste(tabla_encabezado, fila_urbano, fila_semiurbano, fila_rural, tabla_pie, sep = "")
return(tabla)
}
popup <- genera_popup("CDMX", 1000,10, 10)
popup
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos)
View(conteos_df)
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos) %>%
spread(zona, asentamientos)
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos) %>%
spread(zona, asentamientos) %>%
group_by(estado, latitud, longitud, zona) %>%
summarise(urbanos = sum(Urbano), semiurbanos = sum(Semiurbano), rurales = sum(Rural))
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos) %>%
spread(zona, asentamientos) %>%
group_by(estado, latitud, longitud) %>%
summarise(urbanos = sum(Urbano), semiurbanos = sum(Semiurbano), rurales = sum(Rural))
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos) %>%
spread(zona, asentamientos) %>%
group_by(estado, latitud, longitud) %>%
summarise(urbanos = sum(coalesce(Urbano,0)), semiurbanos = sum(coalesce(Semiurbano,0)), rurales = sum(coalesce(Rural,0)))
conteos_df <- select(conteo_asentamiento_df, estado, latitud, longitud, zona, asentamientos) %>%
spread(zona, asentamientos) %>%
group_by(estado, latitud, longitud) %>%
summarise(urbanos = sum(coalesce(Urbano,0)), semiurbanos = sum(coalesce(Semiurbano,0)), rurales = sum(coalesce(Rural,0))) %>%
mutate(pop_up = genera_popup(estado, urbanos, semiurbanos, rurales))
library(leaflet)
mapa <- leaflet(conteos_df) %>%
fitBounds(-122.19, 12.1, -84.64, 32.72) %>% addTiles() %>%
addMarkers(lng = ~as.numeric(longitud), lat = ~as.numeric(latitud), popup =~pop_up)
mapa
