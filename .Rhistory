pkgJoinDF = left_join(pkg16DF, pkg17DF, by = "p5d", copy = FALSE, suffix = c(".x", ".y")) %>%
left_join(pkg18DF, by = "p5d", copy = FALSE, suffix = c(".a",".b")) %>%
select(p5d, firstscan.x, firstscan.y, firstscan, lastscan.x, lastscan.y, lastscan)
View(vsi16DF)
pkgCountDF = select(vsi16DF, source_pkg_id, p5d) %>%
group_by(source_pkg_id, p5d) %>% ummarise(count = count(p5d))
pkgCountDF = select(vsi16DF, source_pkg_id, p5d) %>%
group_by(source_pkg_id, p5d) %>% summarise(count = count(p5d))
pkgCountDF = select(vsi16DF, source_pkg_id, p5d) %>%
group_by(source_pkg_id, p5d) %>% summarise(count = count())
pkgCountDF = select(vsi16DF, source_pkg_id, p5d) %>%
group_by(source_pkg_id, p5d) %>% summarise(count = n())
View(pkgCountDF)
pkgCountDF = select(vsi16DF, source_pkg_id, p5d) %>%
group_by(source_pkg_id, p5d) %>% summarise(count = n()) %>%
filter(count > 1)
pkg13241626DF = filter(pkg16DF,source_pkg_id = 13241626)
pkg13241626DF = filter(pkg16DF,source_pkg_id == 13241626)
pkg13241626DF = filter(pkg16DF,"source_pkg_id" == 13241626)
View(pkg13241626DF)
pkg13241626DF = filter(pkg16DF,source_pkg_id == 13241626)
pkg13241626DF = filter(pkg16DF, source_pkg_id == "13241626")
pkg13241626DF = filter(vsi16DF, source_pkg_id == 13061926)
View(pkgCountDF)
pkg12977591DF = filter(vsi16DF, source_pkg_id == 12977591)
View(pkg12977591DF)
View(pkg12977591DF)
pkg13242396_07003DF = filter(vsi16DF, source_pkg_id == 12977591) %>% filter(p5d == "07003")
View(pkg13242396_07003DF)
pkg13242396_07003DF = filter(vsi16DF, source_pkg_id == 12977591)
pkg13242396_07003DF = filter(vsi16DF, source_pkg_id == 13242396) %>% filter(p5d == "07003")
pkgCountDF = select(vsi16DF, source_pkg_id, p5d, cp_version) %>%
group_by(source_pkg_id, p5d, cp_version) %>% summarise(count = n()) %>%
filter(count > 1)
View(pkgCountDF)
View(pkgCountDF)
pkgCountDF = select(vsi16DF, source_pkg_id, p5d, cp_version) %>%
group_by(source_pkg_id, p5d, cp_version) %>% summarise(count = n()) %>%
filter(count > 1) %>% arrange(desc(count))
pkg_15436462_30127_GA-Douglasville_DF = filter(vsi16DF, source_pkg_id == 15436462)
%>% filter(p5d == "30127")
%>% filter(cp_version == "GA-Douglasville")
pkg_15436462_30127_GA-Douglasville_DF = filter(vsi16DF, source_pkg_id == 15436462) %>%
filter(p5d == "30127") 	%>%
filter(cp_version == "GA-Douglasville")
pkg_15436462_30127_GA_Douglasville_DF = filter(vsi16DF, source_pkg_id == 15436462) %>%
filter(p5d == "30127") 	%>%
filter(cp_version == "GA-Douglasville")
View(pkg_15436462_30127_GA_Douglasville_DF)
library(xlsx)
excelFile = "~/Documents/grayhair/verScanInfo.xlsx"
write.xlsx(pkgCountDF, excelFile, sheetName="Duplicated",
col.names=TRUE, row.names=FALSE, append=FALSE, showNA=TRUE)
write.xlsx(pkg_13205869_DF, excelFile, sheetName="Pkg",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=TRUE)
write.xlsx(pkg_16533973_90003_DF, excelFile, sheetName="Pkg_p5d",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=TRUE)
write.xlsx(pkg_15436462_30127_GA_Douglasville_DF, excelFile, sheetName="Pkg_p5d_cp_version",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=TRUE)
write.xlsx(pkgCountDF, excelFile, sheetName="Duplicated",
col.names=TRUE, row.names=FALSE, append=FALSE)
write.xlsx(pkgCountDF, excelFile, sheetName="Duplicated",
col.names=TRUE, row.names=FALSE, append=FALSE, showNA=FALSE)
write.xlsx(as.data.frame(pkgCountDF), excelFile, sheetName="Duplicated",
col.names=TRUE, row.names=FALSE, append=FALSE, showNA=FALSE)
excelFile = "/Users/federicoaguirre/Documents/grayhair/verScanInfo.xlsx"
write.xlsx(as.data.frame(pkgCountDF), excelFile, sheetName="Duplicated",
col.names=TRUE, row.names=FALSE, append=FALSE, showNA=FALSE)
write.xlsx(as.data.frame(pkg_13205869_DF), excelFile, sheetName="Pkg",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=FALSE)
View(pkg12977591DF)
pkg_13205869_DF = filter(vsi16DF, source_pkg_id == 13205869)
View(pkg12977591DF)
View(pkg12977591DF)
write.xlsx(as.data.frame(pkg_13205869_DF), excelFile, sheetName="Pkg",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=FALSE)
write.xlsx(as.data.frame(pkg_16533973_90003_DF), excelFile, sheetName="Pkg_p5d",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=FALSE)
pkg_16533973_90003_DF = filter(vsi16DF, source_pkg_id == 16533973) %>% filter(p5d == "90003")
pkg_15436462_30127_GA_Douglasville_DF = filter(vsi16DF, source_pkg_id == 15436462) %>%
filter(p5d == "30127") 	%>%
filter(cp_version == "GA-Douglasville")
write.xlsx(as.data.frame(pkg_16533973_90003_DF), excelFile, sheetName="Pkg_p5d",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=FALSE)
write.xlsx(as.data.frame(pkg_15436462_30127_GA_Douglasville_DF), excelFile, sheetName="Pkg_p5d_cp_version",
col.names=TRUE, row.names=FALSE, append=TRUE, showNA=FALSE)
pkgCountDF = select(vsi16DF, source_pkg_id, p5d, cp_version, delivery_date) %>%
group_by(source_pkg_id, p5d, cp_version, delivery_date) %>% summarise(count = n()) %>%
filter(count > 1) %>% arrange(desc(count))
library(xlsx)
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
library("tidyr", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
install.packages(c("curl", "dplyr", "ggplot2", "openxlsx", "rmarkdown", "rstudioapi", "shiny", "sparklyr", "stringi", "stringr", "tidyr", "tidyselect", "xtable"))
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
library(xlsx)
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
library(xlsx)
rawDF = read.xlsx("~/Downloads/SelectTrakComparison.xlsx", sheetName = "DetailsRaw")
library(tydir)
library(tidyr)
ssDF = read.csv("/tmp/pkg20181108_sql.csv", header = FALSE, sep=',',
col.names = c("procedence", "pkgId", "p5d", "cnt"),
colClasses = c("character", "character", "character", "numeric"))
rsDF = read.csv("/tmp/pkg20181108_redshift.csv", header = FALSE, sep=',',
col.names = c("procedence", "pkgId", "p5d", "cnt"),
colClasses = c("character", "character", "character", "numeric"))
View(ssDF)
View(ssDF)
spkgDF = select(ssDF, "pkgId") %>% distinct()
library(tidyr)
library(dplyr)
ssDF = read.csv("/tmp/pkg20181108_sql.csv", header = FALSE, sep=',',
col.names = c("procedence", "pkgId", "p5d", "cnt"),
colClasses = c("character", "numeric", "character", "numeric"))
rsDF = read.csv("/tmp/pkg20181108_redshift.csv", header = FALSE, sep=',',
col.names = c("procedence", "pkgId", "p5d", "cnt"),
colClasses = c("character", "numeric", "character", "numeric"))
spkgDF = select(ssDF, "pkgId") %>% distinct()
rpkgDF = select(rsDF, "pkgId") %>% distinct()
ajsDF = anti_join(spkgDF, rpkgDF, by = "pkgId")
View(ajsDF)
jsDF = inner_join(spkgDF, rpkgDF, by = "pkgId")
View(ajsDF)
pDF = read.csv("~/Downloads/packages.csv", header = FALSE, sep=',',
col.names = c("pkgId", "jobId", "active", "mailDate", "lastMailDate", "mailQty", "seedsTotal"),
colClasses = c("numeric", "numeric", "numeric", "date", "date", "numeric", "numeric"))
pDF = read.csv("~/Downloads/packages.csv", header = FALSE, sep=',',
col.names = c("pkgId", "jobId", "active", "mailDate", "lastMailDate", "mailQty", "seedsTotal"),
colClasses = c("numeric", "numeric", "numeric", "character", "character", "numeric", "numeric"))
View(pDF)
pDF$mailDate = as.Date(pDF$mailDate)
pDF$lastMailDate = as.Date(pDF$lastMailDate)
View(pDF)
apDF = filter(pDF, "active == 1")
apDF = filter(pDF, active == 1)
View(apDF)
runif(1, 1, 5000)
runif(1, 1, 5000)
runif(1, 1, 5000)
runif(1, 1, 5000)
runif(1, 1, 5000)
runif(1, 1, 5000)
runif(1, 1, 5000)
as.factor(runif(1,1,5000))
as.factor(runif(1,1,5000))
alreatorio = as.factor(runif(1,1,5000))
random = 5
alreatorio = runif(1,1,5000)
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
ceiling(runif(1,1,5000))
apDF$lf = ceiling(runif(1,1,5000))
apDF$lf = runif(nrow(apDF), min = 0, max = 1)
apDF$lf = ceiling(runif(nrow(apDF), min = 1, max = nrow(apDF)))
lfpDF = filter(apDF, lf==130404)
View(lfpDF)
apDF$lf = ceiling(runif(nrow(apDF), min = 1, max = 5000))
lfpDF = filter(apDF, lf==130404)
View(lfpDF)
View(apDF)
lfpDF = filter(apDF, lf==2500)
View(lfpDF)
View(lfpDF)
pDF = read.csv("~/Downloads/packages.csv", header = FALSE, sep=',',
col.names = c("pkgId", "jobId", "active", "mailDate", "lastMailDate", "mailQty", "seedsTotal"),
colClasses = c("numeric", "numeric", "numeric", "character", "character", "numeric", "numeric"))
pDF$mailDate = as.Date(pDF$mailDate)
pDF$lastMailDate = as.Date(pDF$lastMailDate)
apDF = filter(pDF, active == 1 & seedsTotal > 0)
View(apDF)
apDF$lf = ceiling(runif(nrow(apDF), min = 1, max = nrow(apDF)))
apDF$lf = ceiling(runif(nrow(apDF), min = 1, max = 5000))
View(apDF)
View(apDF)
samplepDF = filter(apDF, lf == 1213)
View(samplepDF)
samplepDF = filter(apDF, lf == ceiling(runif(1, min = 1, max = 5000)))
samplepDF = filter(apDF, lf == ceiling(runif(1, min = 1, max = 5000)))
samplepDF = filter(apDF, lf == ceiling(runif(1, min = 1, max = 5000)))
housing <- read.csv("/Users/federicoaguirre/Documents/rTutorial/Rgraphics/dataSets/landdata-states.csv")
head(housing[1:5])
View(housing)
hist(housing$Home.Value)
library(ggplot2)
ggplot(housing, aes(x = Home.Value)) +
geom_histogram()
plot(Home.Value ~ Date,
data=subset(housing, State == "MA"))
points(Home.Value ~ Date, col="red",
data=subset(housing, State == "TX"))
legend(1975, 400000,
c("MA", "TX"), title="State",
col=c("black", "red"),
pch=c(1, 1))
ggplot(subset(housing, State %in% c("MA", "TX", "IA")),
aes(x=Date,
y=Home.Value,
color=State))+
geom_point()
help.search("geom_", package = "ggplot2")
ggplot( subset(housing, State %in% c("MA", "TX", "IA")),
geom_bar())
require("xlsx")
read.xlsx(“~/Downloads/CPdescarga.xls”, sheetName=“Aguascalientes”, as.data.frame=TRUE, header=TRUE)
read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE,
startRow = 1, endRow=1349)
detach("package:xlsx", unload=TRUE)
require("xlsx")
detach("package:xlsx", unload=TRUE)
library("openxlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheet = 2, startRow = 1, colNames = TRUE,
rowNames = FALSE, detectDates = FALSE, skipEmptyRows = TRUE,
skipEmptyCols = TRUE, rows = NULL, cols = NULL, check.names = FALSE,
namedRegion = NULL, na.strings = "NA", fillMergedCells = FALSE)
library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("xlsxjars", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
install.packages(c("openxlsx", "tidyr"))
install.packages(c("BH", "DBI", "KernSmooth", "MASS", "Matrix", "R6", "Rcpp", "arules", "assertthat", "backports", "boot", "broom", "callr", "class", "cli", "cluster", "codetools", "colorspace", "config", "curl", "dbplot", "dbplyr", "devtools", "digest", "evaluate", "forcats", "foreign", "forge", "ggplot2", "ggpubr", "ggrepel", "ggsignif", "git2r", "glue", "gtable", "haven", "highr", "hms", "htmltools", "htmlwidgets", "httpuv", "httr", "jsonlite", "knitr", "later", "lattice", "lazyeval", "lubridate", "maps", "markdown", "mgcv", "mime", "modelr", "munsell", "nlme", "nycflights13", "openssl", "openxlsx", "pkgconfig", "polynom", "promises", "psych", "purrr", "r2d3", "rJava", "readr", "readxl", "reprex", "reshape2", "rlang", "rmarkdown", "rpart", "rstudioapi", "rvest", "scales", "selectr", "shiny", "sourcetools", "sp", "sparklyr", "stringi", "stringr", "survival", "testthat", "tinytex", "utf8", "viridisLite", "whisker", "withr", "xfun", "xml2", "xtable", "yaml", "zip"))
library("xlsx", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE,
startRow = 1, endRow=1349)
View(aguascalientesDF)
detach("package:xlsx", unload=TRUE)
library("tidyverse", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
testDF <- select(aguascalientesDF, c_tipo_asenta, d_tipo_asenta)
testDF <- aguacalientesDF %>% select( c_tipo_asenta, d_tipo_asenta)
detach("package:tidyverse", unload=TRUE)
install.packages("tidyr")
require(tidyr)
require("tidyr)
""
""")
require("tidyr")
require("dplyr")
library("tidyverse", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
View(aguascalientesDF)
testDF <- select(aguascalientesDF, d_tipo_asenta, c_tipo_asenta)
detach("package:tidyverse", unload=TRUE)
library("dplyr")
install.packages("dplyr")
library("dplyr")
install.packages("tidyr")
library(tidyverse)
testDF <- select(aguascalientesDF, c_estado, d_estado)
testDF <- aguascalienteDF %>% select( c_estado, d_estado)
require(dplyr)
require("dplyr")
install.packages("dplyr")
require("dplyr")
testDF <- aguascalienteDF %>% select( c_estado, d_estado)
require("dplyr")
install.packages("dplyr")
library(dplyr)
testDF %>% select (d_tipo_asenta, c_tipo_asenta)
testDF aguascalientesDF %>% select (d_tipo_asenta, c_tipo_asenta)
testDF <- aguascalientesDF %>% select (d_tipo_asenta, c_tipo_asenta)
View(testDF)
testDF <- aguascalientesDF %>% select (d_tipo_asenta, c_tipo_asenta) %>% distinct()
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
library(openxlsx)
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
detach("package:openxlsx", unload = TRUE)
library(xlsx)
aguascalientesDF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetName="Aguascalientes", as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheet = 1, startRow = 2, as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetIndex =  = 1, startRow = 2, as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetIndex = 1, startRow = 2, as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetIndex = 1, startRow = 2, as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetIndex = 1, startRow = 2, as.data.frame=TRUE, header=TRUE)
AGU_DF <- read.xlsx("~/Downloads/CPdescarga.xls", sheetIndex = 1, startRow = 2, header=TRUE)
agu_df <- read.csv("~/Documents/3lc/mx-cp/agu-cp.csv", header = TRUE, sep = ",")
agu_df <- read.csv("~/Documents/mx-cp/agu-cp.csv", header = TRUE, sep = ",")
View(agu_df)
AGU_DF <- read.csv("~/Documents/mx-cp/AGU-cp.csv", header = TRUE, sep = ",")
AGU_DF <- read.csv("~/Documents/mx-cp/AGU-cp.csv", header = TRUE, sep = ",")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = ",", skip = 1)
View(cp_df)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "UTF-8")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "Latin-1")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "ISO-8859-1")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "ISO-8859-1")
View(cp_df)
View(cp_df)
View(cp_df)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "Latin-1")
View(cp_df)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "utf-16")
View(cp_df)
View(cp_df)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "UTF-16")
View(cp_df)
getOption("encoding")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "latin1")
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|", skip = 1, colClasses = "character", encoding = "latin1")
View(cp_df)
View(cp_df)
library(dplyr)
zona_df <- select(cp_df, d_zona) %>% distinct()
View(zona_df)
zona_df <- select(cp_df, zona = d_zona) %>% distinct()
View(cp_df)
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct()
View(estado_df)
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct() %>% order_by(estado_id)
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct() %>% order_by(estado_id, asc())
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct() %>% order_by(estado_id)
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct() %>% order_by(estado_id, desc)
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado) %>% distinct() %>% order_by(estado_id, "desc")
tipo_asentamiento_df <- select(cp_df, tipo_asentamiento_id = c_tipo_asenta, tipo_asentamiento = d_tipo_asenta) %>% distinct()
View(tipo_asentamiento_df)
View(cp_df)
ciudad_df <- select(cp_df, estado_id = c_estado, ciudad_id = c_cve_ciudad,
ciudad = d_ciudad) %>% distinct()
View(ciudad_df)
colnames(cp_df)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|",
skip = 1, colClasses = "character", na.strings = "NA", encoding = "latin1")
tipo_asentamiento_df <- select(cp_df, tipo_asentamiento_id = c_tipo_asenta,
tipo_asentamiento = d_tipo_asenta) %>% distinct()
View(tipo_asentamiento_df)
ciudad_df <- select(cp_df, estado_id = c_estado, ciudad_id = c_cve_ciudad,
ciudad = d_ciudad) %>% distinct()
ciudad_vacia_df <- filter(cp_df, $c_cve_ciudad == "")
ciudad_vacia_df <- filter(cp_df, c_cve_ciudad == "")
View(ciudad_vacia_df)
ciudad_df <- filter(cp_df, c_cve_ciudad != "") %>% select(estado_id = c_estado, ciudad_id = c_cve_ciudad,
ciudad = d_ciudad) %>% distinct()
View(ciudad_df)
detach("package:datasets", unload = TRUE)
detach("package:dplyr", unload = TRUE)
detach("package:xlsx", unload = TRUE)
library(dplyr)
cp_df <- read.csv("~/Downloads/CPdescarga.txt" , header = TRUE, sep = "|",
skip = 1, colClasses = "character", na.strings = "NA", encoding = "latin1")
zona_df <- select(cp_df, zona = d_zona) %>% distinct()
estado_df <- select(cp_df, estado_id = c_estado, estado = d_estado)
%>% distinct()
tipo_asentamiento_df <- select(cp_df, tipo_asentamiento_id = c_tipo_asenta,
tipo_asentamiento = d_tipo_asenta) %>% distinct()
# Se filtró el campo de c_cve_ciudad porque las zonas rurales, ejidos, granjas,
# etc. no clasifican como ciudad
ciudad_df <- filter(cp_df, c_cve_ciudad != "") %>% select(estado_id = c_estado,
ciudad_id = c_cve_ciudad, ciudad = d_ciudad) %>% distinct()
View(zona_df)
View(tipo_asentamiento_df)
View(estado_df)
View(cp_df)
View(ciudad_df)
columnas <- colnames(cp_df)
columnas
View(zona_df)
test_df <- select(zona_df, zona, zona_id = substring(zona, 0,1))
test_df <- select(zona_df, zona, zona_id = substring($zona, 0,1))
test_df <- select(zona_df, zona, zona_id = substring($.zona, 0,1))
test_df <- select(zona_df, zona, zona_id = substring(zona_df$zona, 0,1))
zona_df = select(zona_df, zona) %>%
mutate(zona_df.zona_id = substring(zona_df.zona, 0, 1)
zona_df <- select(zona_df, zona) %>%
mutate(zona_df.zona_id = substring(zona_df.zona, 0, 1)
zona_df <- select(zona_df, zona) %>%
zona_df <- select(zona_df, zona)
View(zona_df)
ona_df <- select(zona_df, zona) %>%
mutate(zona_id = substring(zona_df.zona, 0, 1)
ona_df <- mutate(zona_df, zona_id = substring(zona_df.zona, 0, 1)
zona_df <- mutate(zona_df, zona_id = substring(zona_df.zona, 0, 1))
zona_df <- mutate(zona_df, zona_id = substring(zona, 0, 1))
zona_df <- mutate(zona_df, zona_id = substring(zona, 0, 1)) %>%
select(zona_id, zona)
View(ciudad_df)
municipio_df <- select(cp_df, estado_id = c_estado, municipio_id = c_mnpio,
municipio = D_mnpio) %>% distinct()
View(municipio_df)
View(estado_df)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
View(ciudad_df)
View(cp_df)
View(estado_df)
View(municipio_df)
View(tipo_asentamiento_df)
View(zona_df)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
View(tipo_asentamiento_df)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
View(zona_df)
View(tipo_asentamiento_df)
View(municipio_df)
View(estado_df)
View(ciudad_df)
View(ciudad_df)
View(cp_raw_df)
test_df <- select(cp_raw_df, d_codigo, d_CP, c_CP, c_oficina, id_asenta_cpcons, d_asenta )
View(test_df)
test_df <- select(cp_raw_df, d_CP, c_CP) %>% distinct() %>% filter(d_CP != c_CP)
test_df <- select(cp_raw_df, d_CP, c_oficina) %>% distinct() %>% filter(d_CP != c_CP)
test_df <- select(cp_raw_df, d_CP, c_oficina) %>% distinct() %>% filter(d_CP != c_oficina)
test_df <- select(cp_raw_df, d_CP, c_oficina) %>% distinct()
test_df <- select(cp_raw_df, c_CP) %>% distinct()
test_df <- select(cp_raw_df, d_codigo, c_oficina, id_asenta_cpcons, d_asenta )
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
colnames(cp_raw_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo)
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, d_tipo_asenta = tipo_asentamiento_id) %>%
inner_join(tipo_asentamiento_df, by = tipo_asentamiento_id, copy = FALSE,
suffix = c(".x", ".y"))
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = d_tipo_asenta) %>%
inner_join(tipo_asentamiento_df, by = tipo_asentamiento_id, copy = FALSE,
suffix = c(".x", ".y"))
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = d_tipo_asenta)
View(tipo_asentamiento_df)
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta) %>%
inner_join(tipo_asentamiento_df, by = tipo_asentamiento_id, copy = FALSE,
suffix = c(".x", ".y"))
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta) %>%
inner_join(tipo_asentamiento_df, by = c(tipo_asentamiento_id), copy = FALSE,
suffix = c(".x", ".y"))
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta) %>%
inner_join(tipo_asentamiento_df, by = c(tipo_asentamiento_id), copy = TRUE,
suffix = c(".x", ".y"))
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta) %>%
inner_join(tipo_asentamiento_df, by = c("tipo_asentamiento_id"), copy = TRUE,
suffix = c(".x", ".y"))
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
estado_id = c_estado) %>%
inner_join(tipo_asentamiento_df, by = c("tipo_asentamiento_id"), copy = TRUE,
suffix = c(".x", ".y")) %>%
inner_join(estado_df, by = c("estado_id"), copy = TRUE,
suffix = c(".x", ".y"))
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
oficina = c_oficina)
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
oficina = c_oficina, municipio_id = c_mnpio)
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
oficina = c_oficina, estado_id = c_estado, municipio_id = c_mnpio,
ciudad_id = c_cve_ciudad)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
estado_id = c_estado, municipio_id = c_mnpio, ciudad_id = c_cve_ciudad,
oficina = c_oficina)
View(asentamiento_df)
View(cp_raw_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
estado_id = c_estado, municipio_id = c_mnpio, ciudad_id = c_cve_ciudad,
oficina = c_oficina, zona = d_zona)
View(asentamiento_df)
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
estado_id = c_estado, municipio_id = c_mnpio, ciudad_id = c_cve_ciudad,
oficina = c_oficina, zona = d_zona) %>% mutate(zona_id = substring(zona, 0, 1))
View(asentamiento_df)
View(asentamiento_df)
asentamiento_df$zona <- NULL
asentamiento_df <- select(cp_raw_df, codigo_postal = d_codigo,
asentamiento = d_asenta, tipo_asentamiento_id = c_tipo_asenta,
estado_id = c_estado, municipio_id = c_mnpio, ciudad_id = c_cve_ciudad,
zona = d_zona, oficina = c_oficina) %>% mutate(zona_id = substring(zona, 0, 1))
asentamiento_df$zona <- NULL
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
View(asentamiento_df)
write.csv(zona_df, file = "./cp-db/zona.csv", row.names = false)
write.csv(zona_df, file = "./cp-db/zona.csv", row.names = FALSE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
source('~/Documents/proyectos/r-cp-mx/codigo-postal.r', echo=TRUE)
View(municipio_df)
View(ciudad_df)
View(ciudad_df)
View(asentamiento_df)
